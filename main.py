import os,time,config
from instaclient import InstaClient
from instaclient.errors import *

DRIVER=str(os.getcwd()+"/var/chromedriver")

def connect(username,pwd):
  client = InstaClient(driver_path=DRIVER)
  try:
    client.login(username=username, password=pwd)
  except VerificationCodeNecessary:
    code = input('Enter the 2FA security code generated by your Authenticator App or sent to you by SMS')
    client.input_verification_code(code)
  except SuspisciousLoginAttemptError as error:
    if error.mode == SuspisciousLoginAttemptError.EMAIL:
      code = input('Enter the security code that was sent to you via email: ')
    else:
      code = input('Enter the security code that was sent to you via SMS: ')
  client.input_security_code(code)


def main():
  connect(config.LOGIN,config.PASSWORD)
main()
